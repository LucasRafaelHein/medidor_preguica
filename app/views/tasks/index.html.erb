<div class="tasks-header">
  <h1>Medidor de PreguiÃ§a</h1>
  <%= link_to "Nova tarefa", new_task_path, class: "btn btn-new" %>
</div>

<div class="tasks-list">
  <% @tasks.each do |task| %>
    <div class="task-card">
      <div class="task-info">
        <strong><%= task[:nome] %></strong>
      </div>

      <% nivel = task[:preguica] || 0 %>
      <div class="lazy-meter">
        <div 
          class="lazy-meter-fill <%= 
            if nivel < 30
              'low'
            elsif nivel < 70
              'medium'
            else
              'high'
            end 
          %>" 
          style="width: <%= nivel %>%;">
        </div>
      </div>
      <p class="lazy-meter-percentage"><%= nivel %>% preguiÃ§a</p>

      <div class="actions">
        <%= link_to "âœï¸ Editar", edit_task_path(task[:id]), class: "btn btn-edit" %>
        <%= link_to "ğŸ—‘ Excluir", task_path(task[:id]), 
              data: { turbo_method: :delete, turbo_confirm: "Tem certeza?" }, 
              class: "btn btn-delete" %>
      </div>
    </div>
  <% end %>
  <div class="no-tasks" style="<%= 'display: none;' if @tasks.any? %>">
    <p>Nenhuma tarefa cadastrada.</p>
  </div>
  <%= button_to "Logout", destroy_user_session_path, method: :delete, class: "btn-logout" %>
</div>

